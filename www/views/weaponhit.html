<ion-view view-title="Weapon To-Hit">
    <ion-content class="content-bigtable">

        <!-- table: calculation elements -->
        <div class="table-zebra table-padded">
            <div class="row">
                <div class="col col-33 bold">
                    Attacker Gunnery
                </div>
                <div class="col col-67">
                    <select ng-model="viewdata.attackergunnery" ng-change="recalculateToHit(); storePersistent('attackergunnery');">
                        <option>6</option>
                        <option>5</option>
                        <option>4</option>
                        <option>3</option>
                        <option>2</option>
                        <option>1</option>
                    </select>
                </div>
            </div>
            <div class="row">
                <div class="col col-33 bold">
                    Attacker<br/>Movement<br/>&amp; Standing
                </div>
                <div class="col col-67">
                    <label><input type="radio" ng-model="viewdata.attackermove" value="none" ng-change="recalculateToHit();"> None</label><br/>
                    <label><input type="radio" ng-model="viewdata.attackermove" value="walk" ng-change="recalculateToHit();"> Walked</label><br/>
                    <label><input type="radio" ng-model="viewdata.attackermove" value="run" ng-change="recalculateToHit();"> Ran</label><br/>
                    <label><input type="radio" ng-model="viewdata.attackermove" value="jump" ng-change="recalculateToHit();"> Jumped</label><br/>
                    <br/>
                    <label><input type="checkbox" ng-model="viewdata.attackerprone" ng-change="recalculateToHit();"> Prone</label><br/>
                </div>
            </div>
            <div class="row">
                <div class="col col-33 bold">
                    Target<br/>Movement<br/>&amp; Standing
                </div>
                <div class="col col-67">
                    <select ng-model="viewdata.defendermove" ng-change="recalculateToHit();">
                        <option value="0" /> 0 - 2</option>
                        <option value="1" /> 3 - 4</option>
                        <option value="2" /> 5 - 6</option>
                        <option value="3" /> 7 - 9</option>
                        <option value="4" /> 10 - 17</option>
                        <option value="5" /> 18 - 24</option>
                        <option value="6" /> 25+</option>
                    </select><br/>
                    <br/>
                    <label><input type="checkbox" ng-model="viewdata.defenderjumped" ng-change="recalculateToHit();"> Jumped</label><br/>
                    <label><input type="checkbox" ng-model="viewdata.defenderimmobile" ng-change="recalculateToHit();"> Immobile</label><br/>
                    <br/>
                    <label><input type="radio" ng-model="viewdata.defenderprone" value="no" ng-change="recalculateToHit();"> Not Prone</label><br/>
                    <label><input type="radio" ng-model="viewdata.defenderprone" value="nonadjacent" ng-change="recalculateToHit();"> Prone, Non-Adjacent</label><br/>
                    <label><input type="radio" ng-model="viewdata.defenderprone" value="adjacent" ng-change="recalculateToHit();"> Prone, Adjacent</label><br/>
                </div>
            </div>
            <div class="row">
                <div class="col col-33 bold">
                    Terrain<br/>Trees<br/>Partial Cover
                </div>
                <div class="col col-67">
                    <select class="bottompad" ng-model="viewdata.intervening" ng-change="recalculateToHit();">
                        <option value="none">Nothing intervening</option>
                        <option value="light1">Woods, 1 Light</option>
                        <option value="heavy1">Woods, 1 Heavy</option>
                        <option value="light2">Woods, 2 Light</option>
                        <option value="lightheavy">Woods, 1 Light + 1 Heavy</option>
                        <option value="heavy2">Woods, 2 Heavy</option>
                    </select><br/>
                    <select class="bottompad" ng-model="viewdata.targetterrain" ng-change="recalculateToHit();">
                        <option value="none">Target in open</option>
                        <option value="light">Target in Light Woods</option>
                        <option value="heavy">Target in Heavy Woods</option>
                        <option value="water1">Target in Water, 1 deep</option>
                        <option value="water2">Target in Water, 2+ deep</option>
                    </select><br/>
                    <select class="bottompad" ng-model="viewdata.partialcover" ng-change="recalculateToHit();">
                        <option value="none">No Partial Cover</option>
                        <option value="hill1">Level 1 Hill</option>
                        <option value="hill2">Level 2+ Hill</option>
                    </select><br/>
                </div>
            </div>
            <div class="row">
                <div class="col col-33 bold">
                    Attacker Heat<br/>&amp; Damage
                </div>
                <div class="col col-67">
                    <select ng-model="viewdata.heatmodifier" class="bottompad" ng-change="recalculateToHit();">
                        <option value="0" /> Heat 0 - 7</option>
                        <option value="1" /> Heat 8 - 12</option>
                        <option value="2" /> Heat 13 - 16</option>
                        <option value="3" /> Heat 17 - 23</option>
                        <option value="4" /> Heat 24 +</option>
                    </select><br/>
                    <select ng-model="viewdata.armdamaged" class="bottompad" ng-change="recalculateToHit();">
                        <option value="0" /> Arm Actuators OK</option>
                        <option value="1" /> One Actuator Damaged</option>
                        <option value="2" /> Both Actuators Damaged</option>
                        <option value="4" /> Shoulder Damaged</option>
                    </select><br/>
                    <select ng-model="viewdata.sensorsdamaged" class="bottompad" ng-change="recalculateToHit();">
                        <option value="0" /> Sensors OK</option>
                        <option value="2" /> 1 Sensors Damaged</option>
                        <option value="4" /> 2 Sensors Damaged</option>
                    </select><br/>
                </div>
            </div>
            <div class="row">
                <div class="col col-33 bold">
                    Custom Quirks
                </div>
                <div class="col col-67">
                    <div>
                        <select ng-model="viewdata.quirk1.value" ng-change="recalculateToHit();" class="bottompad">
                            <option value="-3">-3</option>
                            <option value="-2">-2</option>
                            <option value="-1">-1</option>
                            <option value="0">0</option>
                            <option value="1">+1</option>
                            <option value="2">+2</option>
                            <option value="3">+3</option>
                        </select>
                        {{ viewdata.quirk1.label }}
                        <a class="quirk-edit-button" href="javascript:void(0);" ng-click="openQuirkLabelEditor('quirk1');"><i class="icon ion-edit icon-accessory"></i></a>
                    </div>
                    <div>
                        <select ng-model="viewdata.quirk2.value" ng-change="recalculateToHit();" class="bottompad">
                            <option value="-3">-3</option>
                            <option value="-2">-2</option>
                            <option value="-1">-1</option>
                            <option value="0">0</option>
                            <option value="1">+1</option>
                            <option value="2">+2</option>
                            <option value="3">+3</option>
                        </select>
                        {{ viewdata.quirk2.label }}
                        <a class="quirk-edit-button" href="javascript:void(0);" ng-click="openQuirkLabelEditor('quirk2');"><i class="icon ion-edit icon-accessory"></i></a>
                    </div>
                    <div>
                        <select ng-model="viewdata.quirk3.value" ng-change="recalculateToHit();" class="bottompad">
                            <option value="-3">-3</option>
                            <option value="-2">-2</option>
                            <option value="-1">-1</option>
                            <option value="0">0</option>
                            <option value="1">+1</option>
                            <option value="2">+2</option>
                            <option value="3">+3</option>
                        </select>
                        {{ viewdata.quirk3.label }}
                        <a class="quirk-edit-button" href="javascript:void(0);" ng-click="openQuirkLabelEditor('quirk3');"><i class="icon ion-edit icon-accessory"></i></a>
                    </div>
                    <div>
                        <select ng-model="viewdata.quirk4.value" ng-change="recalculateToHit();" class="bottompad">
                            <option value="-3">-3</option>
                            <option value="-2">-2</option>
                            <option value="-1">-1</option>
                            <option value="0">0</option>
                            <option value="1">+1</option>
                            <option value="2">+2</option>
                            <option value="3">+3</option>
                        </select>
                        {{ viewdata.quirk4.label }}
                        <a class="quirk-edit-button" href="javascript:void(0);" ng-click="openQuirkLabelEditor('quirk4');"><i class="icon ion-edit icon-accessory"></i></a>
                    </div>
                    <div>
                        <select ng-model="viewdata.quirk5.value" ng-change="recalculateToHit();" class="bottompad">
                            <option value="-3">-3</option>
                            <option value="-2">-2</option>
                            <option value="-1">-1</option>
                            <option value="0">0</option>
                            <option value="1">+1</option>
                            <option value="2">+2</option>
                            <option value="3">+3</option>
                        </select>
                        {{ viewdata.quirk5.label }}
                        <a class="quirk-edit-button" href="javascript:void(0);" ng-click="openQuirkLabelEditor('quirk5');"><i class="icon ion-edit icon-accessory"></i></a>
                    </div>
                </div>
            </div>
            <div class="row">
                <div class="col col-33 bold">
                    Target Range<br/>for This Weapon
                </div>
                <div class="col col-67">
                    <select ng-model="viewdata.range" ng-change="recalculateToHit();" style="margin-top:0.75em;">
                        <option value="long">Long</option>
                        <option value="medium">Medium</option>
                        <option value="short">Short</option>
                        <option value="min1">Under Minimum by 1</option>
                        <option value="min2">Under Minimum by 1</option>
                        <option value="min3">Under Minimum by 3</option>
                    </select>
                </div>
            </div>
        </div><!-- end of table -->

        <br/>

        <!-- any alerts/warnings/justsayno based on their selections -->
        <div ng-show="viewdata.intervening == 'heavy2'" class="alert center">Cannot attack. No line of sight.</div>
        <div ng-show="viewdata.targetterrain == 'hill2'" class="alert center">Cannot attack. No line of sight.</div>
        <div ng-show="viewdata.targetterrain == 'water2'" class="alert center">Cannot attack. Target is underwater.</div>
        <div ng-show="viewdata.targetterrain == 'water1'" class="alert center">Hit location reminder:<br/>Target's legs are underwater.</div>
        <div ng-show="viewdata.partialcover == 'hill1'" class="alert center">Hit location reminder:<br/>Target's legs are behind cover.</div>
        <div ng-show="viewdata.armdamaged != '0'" class="alert center">Reminder:<br/>Arm damage modifier applies only to weapons on this arm.</div>

        <!-- table: to-hit sum -->
        <div class="table-padded">
            <div class="row">
                <div class="col col-33 bold right large">
                    To-Hit Number
                </div>
                <div class="col col-67 bold left large">
                    {{ viewdata.tohitnumber }}
                </div>
            </div>
            <div class="row">
                <div class="col col-33 bold right large">
                    <a href="javascript:void(0);" ng-click="rollToHit();"><a href="javascript:void(0);" ng-click="rollToHit();"><img src="img/die.svg"></i></a>
                </div>
                <div class="col col-67 bold left large">
                    <span ng-show="viewdata.dice.rolled">Rolled {{ viewdata.dice.rolled }} &nbsp; &nbsp; {{ viewdata.dice.hitmiss }}</span>
                </div>
            </div>
        </div><!-- end of table -->

    </ion-content>
</ion-view>
